(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["zui"]=e():t["zui"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"3ac9":function(t,e,i){"use strict";i("81dd")},"81dd":function(t,e,i){},8875:function(t,e,i){var n,o,s;(function(i,r){o=[],n=r,s="function"===typeof n?n.apply(e,o):n,void 0===s||(t.exports=s)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(d){var i,n,o,s=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,r=/@([^@]*):(\d+):(\d+)\s*$/gi,a=s.exec(d.stack)||r.exec(d.stack),c=a&&a[1]||!1,l=a&&a[2]||!1,u=document.location.href.replace(document.location.hash,""),h=document.getElementsByTagName("script");c===u&&(i=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(l-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=i.replace(n,"$1").trim());for(var m=0;m<h.length;m++){if("interactive"===h[m].readyState)return h[m];if(h[m].src===c)return h[m];if(c===u&&h[m].innerHTML&&h[m].innerHTML.trim()===o)return h[m]}return null}}return t}))},b53b:function(t,e,i){},bc2a:function(t,e,i){"use strict";i("b53b")},fb15:function(t,e,i){"use strict";if(i.r(e),"undefined"!==typeof window){var n=window.document.currentScript,o=i("8875");n=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var s=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);s&&(i.p=s[1])}var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"z-button"},[t._t("default")],2)},a=[],c={name:"z-button",props:{type:String}},l=c;i("bc2a");function u(t,e,i,n,o,s,r,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),r?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:t,options:l}}var h=u(l,r,a,!1,null,"5f675ff8",null),m=h.exports;m.install=function(t){t.component(m.name,m)};var d=m,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"flex",width:"100%",height:"100%"}},[t._l(t.imgList,(function(e,n){return i("div",{key:n,staticStyle:{"margin-left":"5px"},style:{width:t.width,height:t.height}},[i("img",{staticStyle:{cursor:"zoom-in",width:"100%",height:"100%"},style:{objectFit:t.fit},attrs:{src:e,alt:""},on:{click:function(e){return t.showPhotoPreview(n)}}})])})),i("multi-image-preview",{ref:"multiImagePreview",attrs:{show:t.multiImageVisible,"img-list":t.imgList,"now-img-index":t.imgIndex}})],2)},p=[],f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[t.show?i("div",{ref:"heImg",staticClass:"hevue-imgpreview-wrap",attrs:{id:"hevue-imgpreview-wrap"},on:{mouseup:function(e){return t.removeMove("pc")},touchend:function(e){return t.removeMove("mobile")},click:function(e){return e.stopPropagation(),t.clickMask.apply(null,arguments)}}},[i("div",{staticClass:"he-img-wrap"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.imgState,expression:"imgState === 1"}],staticClass:"iconfont hevue-img-status-icon rotate-animation"},[t._v("  ")]),i("img",{directives:[{name:"show",rawName:"v-show",value:2===t.imgState,expression:"imgState === 2"}],ref:"heImView",staticClass:"he-img-view",style:"transform: scale("+t.imgScale+") rotate("+t.imgRotate+"deg);margin-top:"+t.imgTop+"px;margin-left:"+t.imgLeft+"px;"+t.maxWH,attrs:{src:t.imgurl},on:{click:function(t){t.stopPropagation()},mousedown:t.addMove,touchstart:t.addMoveMobile}}),i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.imgState,expression:"imgState === 3"}],staticClass:"iconfont hevue-img-status-icon"},[t._v("  ")]),t.closeBtn?i("div",{staticClass:"iconfont he-close-icon",on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}},[t._v("  ")]):t._e(),t.arrowBtn&&t.multiple?i("div",{staticClass:"arrow arrow-left iconfont",on:{click:function(e){return e.stopPropagation(),t.toogleImg(!1)}}},[t._v("  ")]):t._e(),t.arrowBtn&&t.multiple?i("div",{staticClass:"arrow arrow-right iconfont",on:{click:function(e){return e.stopPropagation(),t.toogleImg(!0)}}},[t._v("  ")]):t._e(),t.controlBar?i("div",{staticClass:"he-control-bar-wrap"},[i("div",{staticClass:"he-control-bar",on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"he-control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.scaleFunc(-.15)}}},[t._v("  ")]),i("div",{staticClass:"he-control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.scaleFunc(.15)}}},[t._v("  ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isFull,expression:"isFull"}],staticClass:"he-control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.imgToggle.apply(null,arguments)}}},[t._v("  ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isFull,expression:"!isFull"}],staticClass:"he-control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.imgToggle.apply(null,arguments)}}},[t._v("  ")]),i("div",{staticClass:"he-control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.rotateFunc(-90)}}},[t._v("  ")]),i("div",{staticClass:"he-control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.rotateFunc(90)}}},[t._v("  ")])])]):t._e(),t.controlBar&&t.multiple?i("div",{staticClass:"he-control-num"},[t._v(" "+t._s(t.imgIndex+1)+" / "+t._s(t.imgList.length)+" ")]):t._e()])]):t._e()])},v=[],w={name:"multi-image-preview",props:{imgList:{type:Array,default(){return[]}},nowImgIndex:{type:Number,default:0}},data(){return{imgScale:1,imgTop:0,imgLeft:0,imgRotate:0,isFull:!1,maxWH:"max-width:100%;max-height:100%;",clientX:0,clientY:0,imgIndex:0,canRun:!0,imgurl:"",imgState:1,start:[{},{}],mobileScale:0,show:!1,url:"",multiple:!0,controlBar:!0,closeBtn:!0,arrowBtn:!0,keyboard:!0,clickMaskCLose:!1}},mounted(){this.initImg()},watch:{url(){this.initImg()},show:{handler(t){t&&this.$nextTick(()=>{const t=document.getElementById("hevue-imgpreview-wrap");t.onmousewheel=this.scrollFunc,document.body.addEventListener("DOMMouseScroll",this.scrollFunc),document.ondragstart=function(){return!1},this.multiple?Array.isArray(this.imgList)&&this.imgList.length>0&&(this.imgIndex=Number(this.nowImgIndex)||0,this.changeUrl(this.imgList[this.imgIndex],this.imgIndex)):this.changeUrl(this.url),this.keyboard&&document.addEventListener("keydown",this.keyHandleDebounce)})},immediate:!0}},methods:{init(){this.show=!0},close(){document.body.removeEventListener("DOMMouseScroll",this.scrollFunc),document.ondragstart=null,this.keyboard&&document.removeEventListener("keydown",this.keyHandleDebounce),this.show=!1},initImg(){this.mobileScale=1,this.imgScale=1,this.imgRotate=0,this.imgTop=0,this.imgLeft=0},toogleImg(t){t?(this.imgIndex++,this.imgIndex>this.imgList.length-1&&(this.imgIndex=0)):(this.imgIndex--,this.imgIndex<0&&(this.imgIndex=this.imgList.length-1)),this.changeUrl(this.imgList[this.imgIndex],this.imgIndex)},changeUrl(t,e){this.imgState=1;const i=new Image;i.src=t,i.onload=()=>{(void 0!==e&&e===this.imgIndex||void 0===e)&&(this.imgState=2,this.imgurl=t)},i.onerror=()=>{(void 0!==e&&e===this.imgIndex||void 0===e)&&(this.imgState=3)}},rotateFunc(t){this.imgRotate+=t},scaleFunc(t,e){this.imgScale<=.2&&t<0||(e?this.imgScale=t:this.imgScale+=t)},imgToggle(){this.initImg(),this.isFull?this.maxWH="max-width:100%;max-height:100%;":this.maxWH="",this.isFull=!this.isFull},scrollFunc(t){t=t||window.event,t.delta=t.wheelDelta||-t.detail,t.preventDefault(),t.delta>0&&this.scaleFunc(.05),t.delta<0&&this.scaleFunc(-.05)},addMove(t){t=t||window.event,this.clientX=t.clientX,this.clientY=t.clientY,this.$refs.heImg.onmousemove=this.moveFunc},addMoveMobile(t){t.preventDefault(),t=t||window.event,t.touches.length>1?this.start=t.touches:(this.clientX=t.touches[0].pageX,this.clientY=t.touches[0].pageY),this.$refs.heImg.ontouchmove=this.moveFuncMobile},moveFunc(t){t=t||window.event,t.preventDefault();const e=t.clientX-this.clientX,i=t.clientY-this.clientY;this.imgLeft+=2*e,this.imgTop+=2*i,this.clientX=t.clientX,this.clientY=t.clientY},moveFuncMobile(t){if(t=t||window.event,t.touches.length>1){var e=t.touches,i=this.getDistance(e[0],e[1])/this.getDistance(this.start[0],this.start[1]);this.mobileScale?i>1?this.scaleFunc(i+this.mobileScale-1,!0):this.scaleFunc(i*this.mobileScale,!0):this.scaleFunc(i,!0)}else{const e=t.touches[0];t.preventDefault();const i=e.pageX-this.clientX,n=e.pageY-this.clientY;this.imgLeft+=2*i,this.imgTop+=2*n,this.clientX=e.pageX,this.clientY=e.pageY}},removeMove(t){"pc"===t?this.$refs.heImg.onmousemove=null:(this.mobileScale=this.imgScale,this.$refs.heImg.ontouchmove=null)},keyHandleDebounce(t){this.canRun&&(this.keyHandle(t),this.canRun=!1,setTimeout(()=>{this.canRun=!0},300))},keyHandle(t){t=window.event||t;var e=t.keyCode||t.which||t.charCode;switch(e){case 27:this.close();break;case 65:this.multiple&&this.toogleImg(!1);break;case 68:this.multiple&&this.toogleImg(!0);break;case 87:this.scaleFunc(.15);break;case 83:this.scaleFunc(-.15);break;case 81:this.rotateFunc(-90);break;case 69:this.rotateFunc(90);break;case 82:this.initImg();break;default:break}},clickMask(){this.clickMaskCLose&&this.close()},getDistance(t,e){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},downloadIamge(){const t=new Image;t.setAttribute("crossOrigin","anonymous"),t.onload=function(){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const n=e.toDataURL("image/png"),o=document.createElement("a"),s=new MouseEvent("click");o.download="photo"+ +new Date,o.href=n,o.dispatchEvent(s)},t.onerror=function(t){console.log("图片信息不正确或图片服务器禁止访问"),console.log(t)},this.multiple?t.src=this.imgList[this.imgIndex]:t.src=this.url}}},b=w,y=(i("3ac9"),u(b,f,v,!1,null,"4b135e9c",null)),x=y.exports,I={name:"z-image-preview",props:{imgList:{type:Array,default(){return[]}},width:{type:String,default:"150px"},height:{type:String,default:"150px"},fit:{type:String,default:"cover"}},data(){return{imgIndex:0,multiImageVisible:!1}},components:{MultiImagePreview:x},methods:{showPhotoPreview(t){this.imgIndex=t,this.multiImageVisible=!0,this.$nextTick(()=>{this.$refs.multiImagePreview.init()})}}},S=I,_=u(S,g,p,!1,null,"533958ba",null),k=_.exports;k.install=function(t){t.component(k.name,k)};var F=k;const C=[d,F],M=function(t){M.installed||C.map(e=>t.component(e.name,e))};"undefined"!==typeof window&&window.Vue&&M(window.Vue);var L={install:M,ZButton:d,ZImagePreview:F};e["default"]=L}})}));
//# sourceMappingURL=zui.umd.min.js.map