(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["zui"]=e(require("vue")):t["zui"]=e(t["Vue"])})("undefined"!==typeof self?self:this,(function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"0742":function(t,e,i){},"3b4d":function(t,e,i){"use strict";i("cad5")},8875:function(t,e,i){var n,o,r;(function(i,s){o=[],n=s,r="function"===typeof n?n.apply(e,o):n,void 0===r||(t.exports=r)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(h){var i,n,o,r=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,s=/@([^@]*):(\d+):(\d+)\s*$/gi,c=r.exec(h.stack)||s.exec(h.stack),a=c&&c[1]||!1,l=c&&c[2]||!1,u=document.location.href.replace(document.location.hash,""),g=document.getElementsByTagName("script");a===u&&(i=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(l-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=i.replace(n,"$1").trim());for(var m=0;m<g.length;m++){if("interactive"===g[m].readyState)return g[m];if(g[m].src===a)return g[m];if(a===u&&g[m].innerHTML&&g[m].innerHTML.trim()===o)return g[m]}return null}}return t}))},"8bbf":function(e,i){e.exports=t},a26e:function(t,e){t.exports="data:image/png;base64,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"},b53b:function(t,e,i){},bc2a:function(t,e,i){"use strict";i("b53b")},cad5:function(t,e,i){},ccf0:function(t,e,i){"use strict";i("0742")},fb15:function(t,e,i){"use strict";if(i.r(e),"undefined"!==typeof window){var n=window.document.currentScript,o=i("8875");n=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var r=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);r&&(i.p=r[1])}var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"z-button"},[t._t("default")],2)},c=[],a={name:"z-button",props:{type:String}},l=a;i("bc2a");function u(t,e,i,n,o,r,s,c){var a,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),s?(a=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=a):o&&(a=c?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),a)if(l.functional){l._injectStyles=a;var u=l.render;l.render=function(t,e){return a.call(e),u(t,e)}}else{var g=l.beforeCreate;l.beforeCreate=g?[].concat(g,a):[a]}return{exports:t,options:l}}var g=u(l,s,c,!1,null,"5f675ff8",null),m=g.exports;m.install=function(t){t.component(m.name,m)};var h=m,d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["img-wrapper",t.customClass]},[t._l(t.imgList,(function(e,n){return i("div",{key:n,staticClass:"img-item",style:{width:t.width,height:t.height}},[i("img",{style:{objectFit:t.fit},attrs:{src:e,alt:""},on:{click:function(e){return t.showPhotoPreview(n)},error:t.handleImgError}})])})),i("multi-image-preview",{ref:"multiImagePreview",attrs:{show:t.multiImageVisible,"img-list":t.imgList,"now-img-index":t.imgIndex}})],2)},f=[],p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[t.show?i("div",{ref:"imagePreview",staticClass:"image-preview-wrapper",attrs:{id:"image-preview-wrapper"},on:{mouseup:function(e){return t.removeMove("pc")},touchend:function(e){return t.removeMove("mobile")},click:function(e){return e.stopPropagation(),t.clickMask.apply(null,arguments)}}},[i("div",{staticClass:"image-wrapper"},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===t.imgState,expression:"imgState === 1"}],staticClass:"iconfont image-status-icon rotate-animation"},[t._v("  ")]),i("img",{directives:[{name:"show",rawName:"v-show",value:2===t.imgState,expression:"imgState === 2"}],ref:"imageView",staticClass:"image-viewer",style:"transform: scale("+t.imgScale+") rotate("+t.imgRotate+"deg);margin-top:"+t.imgTop+"px;margin-left:"+t.imgLeft+"px;"+t.maxWH,attrs:{src:t.imgUrl,alt:""},on:{click:function(t){t.stopPropagation()},mousedown:t.addMove,touchstart:t.addMoveMobile}}),i("div",{directives:[{name:"show",rawName:"v-show",value:3===t.imgState,expression:"imgState === 3"}],staticClass:"iconfont image-status-icon"},[t._v("  ")]),t.closeBtn?i("div",{staticClass:"iconfont close-icon",on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}},[t._v("  ")]):t._e(),t.arrowBtn&&t.multiple?i("div",{staticClass:"arrow arrow-left iconfont",on:{click:function(e){return e.stopPropagation(),t.toogleImg(!1)}}},[t._v("  ")]):t._e(),t.arrowBtn&&t.multiple?i("div",{staticClass:"arrow arrow-right iconfont",on:{click:function(e){return e.stopPropagation(),t.toogleImg(!0)}}},[t._v("  ")]):t._e(),t.controlBar?i("div",{staticClass:"control-bar-wrap"},[i("div",{staticClass:"control-bar",on:{click:function(t){t.stopPropagation()}}},[i("div",{staticClass:"control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.scaleFunc(-.15)}}},[t._v("  ")]),i("div",{staticClass:"control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.scaleFunc(.15)}}},[t._v("  ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isFull,expression:"isFull"}],staticClass:"control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.imgToggle.apply(null,arguments)}}},[t._v("  ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isFull,expression:"!isFull"}],staticClass:"control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.imgToggle.apply(null,arguments)}}},[t._v("  ")]),i("div",{staticClass:"control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.rotateFunc(-90)}}},[t._v("  ")]),i("div",{staticClass:"control-btn iconfont",on:{click:function(e){return e.stopPropagation(),t.rotateFunc(90)}}},[t._v("  ")])])]):t._e(),t.controlBar&&t.multiple?i("div",{staticClass:"control-num"},[t._v(" "+t._s(t.imgIndex+1)+" / "+t._s(t.imgList.length)+" ")]):t._e()])]):t._e()])},A=[],v={name:"MultiImgPreview",props:{imgList:{type:Array,default(){return[]}},nowImgIndex:{type:Number,default:0}},data(){return{imgScale:1,imgTop:0,imgLeft:0,imgRotate:0,isFull:!1,maxWH:"max-width:100%;max-height:100%;",clientX:0,clientY:0,imgIndex:0,canRun:!0,imgUrl:"",imgState:1,start:[{},{}],mobileScale:0,show:!1,url:"",multiple:!0,controlBar:!0,closeBtn:!0,arrowBtn:!0,keyboard:!0,clickMaskCLose:!1}},mounted(){this.initImg()},watch:{url(){this.initImg()},show:{handler(t){t&&this.$nextTick(()=>{console.log(this.imgList);const t=document.getElementById("image-preview-wrapper");t.onmousewheel=this.scrollFunc,document.body.addEventListener("DOMMouseScroll",this.scrollFunc),document.ondragstart=function(){return!1},this.multiple?Array.isArray(this.imgList)&&this.imgList.length>0&&(this.imgIndex=Number(this.nowImgIndex)||0,this.changeUrl(this.imgList[this.imgIndex],this.imgIndex)):this.changeUrl(this.url),this.keyboard&&document.addEventListener("keydown",this.keyHandleDebounce)})},immediate:!0}},methods:{init(){this.show=!0},close(){document.body.removeEventListener("DOMMouseScroll",this.scrollFunc),document.ondragstart=null,this.keyboard&&document.removeEventListener("keydown",this.keyHandleDebounce),this.show=!1},initImg(){this.mobileScale=1,this.imgScale=1,this.imgRotate=0,this.imgTop=0,this.imgLeft=0},toogleImg(t){t?(this.imgIndex++,this.imgIndex>this.imgList.length-1&&(this.imgIndex=0)):(this.imgIndex--,this.imgIndex<0&&(this.imgIndex=this.imgList.length-1)),this.changeUrl(this.imgList[this.imgIndex],this.imgIndex)},changeUrl(t,e){this.imgState=1;const i=new Image;i.src=t,i.onload=()=>{(void 0!==e&&e===this.imgIndex||void 0===e)&&(this.imgState=2,this.imgUrl=t)},i.onerror=()=>{(void 0!==e&&e===this.imgIndex||void 0===e)&&(this.imgState=3)},console.log(this.imgState)},rotateFunc(t){this.imgRotate+=t},scaleFunc(t,e){this.imgScale<=.2&&t<0||(e?this.imgScale=t:this.imgScale+=t)},imgToggle(){this.initImg(),this.isFull?this.maxWH="max-width:100%;max-height:100%;":this.maxWH="",this.isFull=!this.isFull},scrollFunc(t){t=t||window.event,t.delta=t.wheelDelta||-t.detail,t.preventDefault(),t.delta>0&&this.scaleFunc(.05),t.delta<0&&this.scaleFunc(-.05)},addMove(t){t=t||window.event,this.clientX=t.clientX,this.clientY=t.clientY,this.$refs.imagePreview.onmousemove=this.moveFunc},addMoveMobile(t){t.preventDefault(),t=t||window.event,t.touches.length>1?this.start=t.touches:(this.clientX=t.touches[0].pageX,this.clientY=t.touches[0].pageY),this.$refs.imagePreview.ontouchmove=this.moveFuncMobile},moveFunc(t){t=t||window.event,t.preventDefault();const e=t.clientX-this.clientX,i=t.clientY-this.clientY;this.imgLeft+=2*e,this.imgTop+=2*i,this.clientX=t.clientX,this.clientY=t.clientY},moveFuncMobile(t){if(t=t||window.event,t.touches.length>1){var e=t.touches,i=this.getDistance(e[0],e[1])/this.getDistance(this.start[0],this.start[1]);this.mobileScale?i>1?this.scaleFunc(i+this.mobileScale-1,!0):this.scaleFunc(i*this.mobileScale,!0):this.scaleFunc(i,!0)}else{const e=t.touches[0];t.preventDefault();const i=e.pageX-this.clientX,n=e.pageY-this.clientY;this.imgLeft+=2*i,this.imgTop+=2*n,this.clientX=e.pageX,this.clientY=e.pageY}},removeMove(t){"pc"===t?this.$refs.imagePreview.onmousemove=null:(this.mobileScale=this.imgScale,this.$refs.imagePreview.ontouchmove=null)},keyHandleDebounce(t){this.canRun&&(this.keyHandle(t),this.canRun=!1,setTimeout(()=>{this.canRun=!0},300))},keyHandle(t){t=window.event||t;var e=t.keyCode||t.which||t.charCode;switch(e){case 27:this.close();break;case 65:this.multiple&&this.toogleImg(!1);break;case 68:this.multiple&&this.toogleImg(!0);break;case 87:this.scaleFunc(.15);break;case 83:this.scaleFunc(-.15);break;case 81:this.rotateFunc(-90);break;case 69:this.rotateFunc(90);break;case 82:this.initImg();break;default:break}},clickMask(){this.clickMaskCLose&&this.close()},getDistance(t,e){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},downloadImage(){const t=new Image;t.setAttribute("crossOrigin","anonymous"),t.onload=function(){const e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const n=e.toDataURL("image/png"),o=document.createElement("a"),r=new MouseEvent("click");o.download="photo"+ +new Date,o.href=n,o.dispatchEvent(r)},t.onerror=function(t){console.log("图片信息不正确或图片服务器禁止访问"),console.log(t)},this.multiple?t.src=this.imgList[this.imgIndex]:t.src=this.url}}},w=v,I=(i("ccf0"),u(w,p,A,!1,null,"93d89fc8",null)),B=I.exports,C={name:"ZImagePreview",props:{imgList:{type:Array,default(){return[]}},width:{type:String,default:"150px"},height:{type:String,default:"150px"},fit:{type:String,default:"cover"},customClass:{type:String,default:""}},data(){return{imgIndex:0,errorImg:i("a26e"),multiImageVisible:!1}},components:{MultiImagePreview:B},methods:{showPhotoPreview(t){this.imgIndex=t,this.multiImageVisible=!0,this.$nextTick(()=>{this.$refs.multiImagePreview.init()})},handleImgError(t){t.target.src=this.errorImg,t.target.onerror=null}}},b=C,E=(i("3b4d"),u(b,d,f,!1,null,"d620f2e2",null)),x=E.exports;x.install=function(t){t.component(x.name,x)};var M=x,y=i("8bbf"),P=i.n(y);const Y=P.a.extend(B);let D;const S=(t={})=>{"string"===typeof t&&(t={url:t}),t.show=!0,D=new Y({});for(let e in t)t.hasOwnProperty(e)&&(D[e]=t[e]);return D.$mount(),document.body.appendChild(D.$el),D};var G=S;const k=[h,M],F=function(t){F.installed||(k.map(e=>t.component(e.name,e)),t.prototype.$ZPreviewer=G)};"undefined"!==typeof window&&window.Vue&&F(window.Vue);var Q={install:F,ZButton:h,ZImagePreview:M,ZPreviewer:G};e["default"]=Q}})}));
//# sourceMappingURL=zui.umd.min.js.map